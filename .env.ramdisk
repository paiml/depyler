# RAM Disk Configuration for Depyler (INSTITUTIONALIZED)
#
# For full setup (creates RAM disk if needed):
#   source scripts/setup_ramdisk.sh
#
# For quick env-only (assumes RAM disk exists):
#   source .env.ramdisk
#
# To teardown:
#   ./scripts/teardown_ramdisk.sh

RAMDISK_PATH="/Volumes/DepylerRAM"

# Verify RAM disk exists
if [ ! -d "$RAMDISK_PATH" ]; then
    echo "ERROR: RAM disk not mounted at $RAMDISK_PATH"
    echo "Run: source scripts/setup_ramdisk.sh"
    return 1
fi

# Temporary files go to RAM disk
export TMPDIR="${RAMDISK_PATH}/tmp"

# Cargo build artifacts go to RAM disk
export CARGO_TARGET_DIR="${RAMDISK_PATH}/cargo_target"

# Optimize for speed over debuggability
export CARGO_INCREMENTAL=0
export RUSTFLAGS="-C debuginfo=0"

echo "RAM disk configured (DepylerRAM):"
echo "  TMPDIR=$TMPDIR"
echo "  CARGO_TARGET_DIR=$CARGO_TARGET_DIR"
df -h "$RAMDISK_PATH" | tail -1
