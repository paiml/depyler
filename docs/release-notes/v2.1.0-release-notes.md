# Depyler v2.1.0 Release Notes

**Release Date**: January 4, 2025

## üéâ Overview

Depyler v2.1.0 introduces a comprehensive developer tooling suite, making Python-to-Rust transpilation more accessible and productive. This release focuses on IDE integration, debugging support, performance profiling, and documentation generation.

## ‚ú® Major Features

### üõ†Ô∏è Language Server Protocol (LSP) Support

Full IDE integration through the Language Server Protocol:

- **Symbol Navigation**: Go-to-definition, find references across Python and generated Rust
- **Hover Information**: Instant type details and documentation on hover
- **Code Completions**: Context-aware completions for Python annotations and Depyler directives
- **Real-time Diagnostics**: Immediate feedback on transpilation issues
- **Multi-IDE Support**: Works with VSCode, Neovim, IntelliJ, and any LSP-compatible editor

```bash
# Start the language server
depyler lsp --stdio
```

### üêõ Advanced Debugging Support

Comprehensive debugging framework for transpiled code:

- **Source Mapping**: Seamless mapping between Python line numbers and generated Rust
- **Debug Levels**: 
  - None: Production mode with no debug overhead
  - Basic: Line number preservation for stack traces
  - Full: Complete variable state tracking
- **Debugger Integration**: Automatic GDB/LLDB script generation
- **Debug Commands**: New CLI commands for debugging workflows

```bash
# Transpile with debug information
depyler transpile main.py --debug --source-map

# Generate debugger scripts
depyler debug generate-scripts main.rs
```

### üìä Performance Profiling

Analyze and optimize Python code before transpilation:

- **Hot Path Detection**: Identify performance bottlenecks automatically
- **Flamegraph Generation**: Visualize execution time distribution
- **Performance Predictions**: Estimate Rust performance gains before transpiling
- **Memory Analysis**: Track allocations and suggest optimizations
- **Function-level Metrics**: Detailed per-function performance data

```bash
# Profile with flamegraph
depyler profile compute.py --flamegraph

# Compare Python vs Rust performance
depyler profile algorithm.py --compare
```

### üìö Documentation Generation

Automatically generate comprehensive documentation:

- **API References**: Extract and format function signatures and docstrings
- **Usage Guides**: Generate how-to documentation for transpiled code
- **Migration Notes**: Python-to-Rust transition guides
- **Multiple Formats**: Markdown, HTML, and JSON output
- **Customizable Levels**: API-only, usage examples, or full documentation

```bash
# Generate documentation
depyler docs mymodule.py --format html --level full
```

## üîß Additional Improvements

### Migration Suggestions
- Detects Python patterns and suggests idiomatic Rust alternatives
- Iterator pattern recognition and optimization hints
- Error handling pattern improvements (None vs Result)
- Ownership and borrowing guidance

### Performance Warnings
- Static analysis for algorithmic complexity issues
- String concatenation in loops detection
- Memory allocation pattern analysis
- Redundant computation detection

### Type Hints Provider
- Intelligent type inference with confidence levels
- Parameter and return type suggestions
- Variable type inference based on usage

### Function Inlining
- Smart inlining optimizer with cost-benefit analysis
- Call graph analysis with recursion detection
- Configurable inlining policies

## üêõ Bug Fixes

- Fixed list generation to always use `vec!` macro ensuring mutability support
- Fixed multiple test issues related to code optimization
- Resolved compilation errors in new modules
- Fixed test expectations for optimized code generation

## üìà Quality Metrics

- **SATD Count**: 0 (Toyota Way: Zero Defects)
- **Test Coverage**: 100% (561 tests passing)
- **Clippy Warnings**: 0 ‚ú®
- **New Modules**: 6 (ide, lsp, debug, profiling, documentation, associated CLIs)

## üöÄ Getting Started

### IDE Setup

**VSCode**:
```json
{
  "depyler.lsp.path": "depyler",
  "depyler.lsp.args": ["lsp", "--stdio"]
}
```

**Neovim**:
```lua
vim.lsp.start({
  name = 'depyler',
  cmd = {'depyler', 'lsp', '--stdio'},
})
```

### Debugging Workflow

```bash
# 1. Transpile with debug info
depyler transpile app.py --debug --source-map

# 2. Compile with debug symbols
cargo build

# 3. Debug with source mapping
gdb target/debug/app
```

### Performance Analysis

```bash
# 1. Profile Python code
depyler profile compute.py --hot-paths

# 2. Review optimization suggestions
depyler profile compute.py --export analysis.json

# 3. Transpile with optimizations
depyler transpile compute.py --optimize
```

## üíî Breaking Changes

None. All v2.0.0 code remains compatible.

## üîÆ What's Next

- v3.0: Advanced language features (generators, advanced decorators, full async)
- Enhanced IDE features (refactoring, code actions)
- Profile-guided optimization
- SIMD pattern recognition

## üì¶ Installation

```bash
# From crates.io
cargo install depyler

# Or build from source
git clone https://github.com/paiml/depyler
cd depyler
cargo install --path crates/depyler
```

## üôè Acknowledgments

Thanks to all contributors who made this release possible! Special thanks to the Toyota Way principles that guide our development process.

## üìö Documentation

- [User Guide](../user-guide.md) - Updated with new CLI commands
- [CLI Reference](../cli-reference.md) - Complete command documentation
- [Migration Guide](../migration-guide.md) - Python to Rust transition
- [CHANGELOG](../../CHANGELOG.md) - Detailed change log

---

For questions or issues, please visit: https://github.com/paiml/depyler/issues