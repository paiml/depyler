# Generated by: depyler corpus generator
# Source: hard_cp_ds_rope.py
#
# Rope-like string operations for transpiler stress testing.


def rope_concat(a: list[int], b: list[int]) -> list[int]:
    """Concatenate two rope segments."""
    result: list[int] = []
    i: int = 0
    while i < len(a):
        result.append(a[i])
        i = i + 1
    j: int = 0
    while j < len(b):
        result.append(b[j])
        j = j + 1
    return result


def rope_split(rope: list[int], pos: int) -> list[list[int]]:
    """Split rope at position pos. Returns [left, right]."""
    left: list[int] = []
    right: list[int] = []
    i: int = 0
    while i < len(rope):
        if i < pos:
            left.append(rope[i])
        else:
            right.append(rope[i])
        i = i + 1
    result: list[list[int]] = [left, right]
    return result


def rope_insert(rope: list[int], pos: int, segment: list[int]) -> list[int]:
    """Insert segment at position pos."""
    parts: list[list[int]] = rope_split(rope, pos)
    left: list[int] = parts[0]
    right: list[int] = parts[1]
    mid: list[int] = rope_concat(left, segment)
    return rope_concat(mid, right)


def rope_delete(rope: list[int], start: int, end: int) -> list[int]:
    """Delete elements from start to end (exclusive)."""
    result: list[int] = []
    i: int = 0
    while i < len(rope):
        if i < start or i >= end:
            result.append(rope[i])
        i = i + 1
    return result


def rope_index(rope: list[int], idx: int) -> int:
    """Access element at index."""
    if idx < 0 or idx >= len(rope):
        return 0 - 1
    return rope[idx]


def rope_length(rope: list[int]) -> int:
    """Return length of rope."""
    return len(rope)


def test_module() -> int:
    passed: int = 0
    r1: list[int] = [1, 2, 3]
    r2: list[int] = [4, 5]
    combined: list[int] = rope_concat(r1, r2)
    if combined == [1, 2, 3, 4, 5]:
        passed = passed + 1
    parts: list[list[int]] = rope_split(combined, 2)
    if parts[0] == [1, 2]:
        passed = passed + 1
    inserted: list[int] = rope_insert([1, 2, 5, 6], 2, [3, 4])
    if inserted == [1, 2, 3, 4, 5, 6]:
        passed = passed + 1
    deleted: list[int] = rope_delete([1, 2, 3, 4, 5], 1, 3)
    if deleted == [1, 4, 5]:
        passed = passed + 1
    if rope_index(combined, 3) == 4:
        passed = passed + 1
    return passed
