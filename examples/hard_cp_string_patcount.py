# Generated by: depyler corpus generator
# Source: hard_cp_string_patcount.py
#
# Pattern counting and frequency in strings for transpiler stress testing.


def count_char_a(s: str) -> int:
    """Count occurrences of character 'a' in string s."""
    count: int = 0
    i: int = 0
    while i < len(s):
        if s[i] == "a":
            count = count + 1
        i = i + 1
    return count


def count_substring(text: str, sub: str) -> int:
    """Count non-overlapping occurrences of sub in text."""
    n: int = len(text)
    m: int = len(sub)
    if m == 0 or m > n:
        return 0
    count: int = 0
    i: int = 0
    while i <= n - m:
        matched: int = 1
        j: int = 0
        while j < m:
            if text[i + j] != sub[j]:
                matched = 0
                j = m
            j = j + 1
        if matched == 1:
            count = count + 1
            i = i + m
        else:
            i = i + 1
    return count


def longest_common_prefix_two(a: str, b: str) -> int:
    """Length of longest common prefix of two strings."""
    max_len: int = len(a)
    if len(b) < max_len:
        max_len = len(b)
    i: int = 0
    while i < max_len:
        if a[i] != b[i]:
            return i
        i = i + 1
    return max_len


def longest_common_prefix_all(words: list[str]) -> int:
    """Length of longest common prefix among all words."""
    n: int = len(words)
    if n == 0:
        return 0
    if n == 1:
        return len(words[0])
    best: int = longest_common_prefix_two(words[0], words[1])
    i: int = 2
    while i < n:
        curr: int = longest_common_prefix_two(words[0], words[i])
        if curr < best:
            best = curr
        i = i + 1
    return best


def distinct_char_count(s: str) -> int:
    """Count distinct characters in string."""
    seen: list[int] = [0] * 256
    i: int = 0
    while i < len(s):
        idx: int = ord(s[i])
        seen[idx] = 1
        i = i + 1
    total: int = 0
    j: int = 0
    while j < 256:
        total = total + seen[j]
        j = j + 1
    return total


def test_module() -> int:
    passed: int = 0
    if count_char_a("banana") == 3:
        passed = passed + 1
    if count_substring("ababab", "ab") == 3:
        passed = passed + 1
    if longest_common_prefix_two("flower", "flow") == 4:
        passed = passed + 1
    if longest_common_prefix_all(["flower", "flow", "flight"]) == 2:
        passed = passed + 1
    if distinct_char_count("abcabc") == 3:
        passed = passed + 1
    return passed
