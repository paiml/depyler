# Generated by: depyler corpus generator
# Source: hard_algo_palindrome.py
#
# Palindrome checking and longest palindromic substring.


def is_palindrome_str(s: str) -> int:
    """Check if string is a palindrome. Returns 1 if yes, 0 if no."""
    n: int = len(s)
    lo: int = 0
    hi: int = n - 1
    while lo < hi:
        if s[lo] != s[hi]:
            return 0
        lo = lo + 1
        hi = hi - 1
    return 1


def is_palindrome_num(num: int) -> int:
    """Check if non-negative integer is a palindrome. Returns 1/0."""
    if num < 0:
        return 0
    original: int = num
    reversed_val: int = 0
    val: int = num
    while val > 0:
        digit: int = val % 10
        reversed_val = reversed_val * 10 + digit
        val = val // 10
    if original == reversed_val:
        return 1
    return 0


def longest_palindrome_substring_len(s: str) -> int:
    """Length of the longest palindromic substring."""
    n: int = len(s)
    if n == 0:
        return 0
    best: int = 1
    i: int = 0
    while i < n:
        lo: int = i
        hi: int = i
        while lo >= 0 and hi < n and s[lo] == s[hi]:
            span: int = hi - lo + 1
            if span > best:
                best = span
            lo = lo - 1
            hi = hi + 1
        lo = i
        hi = i + 1
        while lo >= 0 and hi < n and s[lo] == s[hi]:
            span = hi - lo + 1
            if span > best:
                best = span
            lo = lo - 1
            hi = hi + 1
        i = i + 1
    return best


def count_palindromic_substrings(s: str) -> int:
    """Count the number of palindromic substrings."""
    n: int = len(s)
    count: int = 0
    i: int = 0
    while i < n:
        lo: int = i
        hi: int = i
        while lo >= 0 and hi < n and s[lo] == s[hi]:
            count = count + 1
            lo = lo - 1
            hi = hi + 1
        lo = i
        hi = i + 1
        while lo >= 0 and hi < n and s[lo] == s[hi]:
            count = count + 1
            lo = lo - 1
            hi = hi + 1
        i = i + 1
    return count


def longest_palindromic_subsequence(s: str) -> int:
    """Length of longest palindromic subsequence using DP."""
    n: int = len(s)
    if n == 0:
        return 0
    dp: List[List[int]] = []
    r: int = 0
    while r < n:
        row: List[int] = [0] * n
        dp.append(row)
        r = r + 1
    i: int = 0
    while i < n:
        dp[i][i] = 1
        i = i + 1
    length: int = 2
    while length <= n:
        start: int = 0
        while start <= n - length:
            end: int = start + length - 1
            if s[start] == s[end]:
                if length == 2:
                    dp[start][end] = 2
                else:
                    dp[start][end] = dp[start + 1][end - 1] + 2
            else:
                left: int = dp[start + 1][end]
                right: int = dp[start][end - 1]
                if left > right:
                    dp[start][end] = left
                else:
                    dp[start][end] = right
            start = start + 1
        length = length + 1
    return dp[0][n - 1]


def make_palindrome_min_add(s: str) -> int:
    """Minimum characters to add at end to make string a palindrome."""
    n: int = len(s)
    if n <= 1:
        return 0
    longest_suffix_pal: int = 0
    i: int = 0
    while i < n:
        lo: int = i
        hi: int = n - 1
        is_pal: int = 1
        while lo < hi:
            if s[lo] != s[hi]:
                is_pal = 0
                lo = hi
            lo = lo + 1
            hi = hi - 1
        if is_pal == 1:
            suffix_len: int = n - i
            if suffix_len > longest_suffix_pal:
                longest_suffix_pal = suffix_len
        i = i + 1
    return n - longest_suffix_pal


def test_module() -> int:
    """Test all palindrome functions."""
    passed: int = 0

    r1: int = is_palindrome_str("racecar")
    if r1 == 1:
        passed = passed + 1

    r2: int = is_palindrome_str("hello")
    if r2 == 0:
        passed = passed + 1

    r3: int = is_palindrome_num(121)
    if r3 == 1:
        passed = passed + 1

    r4: int = is_palindrome_num(123)
    if r4 == 0:
        passed = passed + 1

    r5: int = longest_palindrome_substring_len("babad")
    if r5 == 3:
        passed = passed + 1

    r6: int = count_palindromic_substrings("aaa")
    if r6 == 6:
        passed = passed + 1

    r7: int = longest_palindromic_subsequence("bbbab")
    if r7 == 4:
        passed = passed + 1

    r8: int = make_palindrome_min_add("abc")
    if r8 == 2:
        passed = passed + 1

    return passed
