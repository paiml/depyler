# Generated by: depyler corpus generator
# Source: hard_cp_math_totient.py
#
# Euler's totient and sum for transpiler stress testing.


def euler_totient(n: int) -> int:
    """Euler's totient function phi(n)."""
    result: int = n
    p: int = 2
    temp: int = n
    while p * p <= temp:
        if temp % p == 0:
            while temp % p == 0:
                temp = temp // p
            result = result - result // p
        p = p + 1
    if temp > 1:
        result = result - result // temp
    return result


def totient_sum(limit: int) -> int:
    """Sum of totient(i) for i from 1 to limit."""
    total: int = 0
    i: int = 1
    while i <= limit:
        total = total + euler_totient(i)
        i = i + 1
    return total


def totient_sieve(limit: int) -> list[int]:
    """Compute totient for all numbers 1..limit using sieve."""
    phi: list[int] = [0] * (limit + 1)
    i: int = 0
    while i <= limit:
        phi[i] = i
        i = i + 1
    p: int = 2
    while p <= limit:
        if phi[p] == p:
            k: int = p
            while k <= limit:
                phi[k] = phi[k] - phi[k] // p
                k = k + p
        p = p + 1
    return phi


def count_coprimes(n: int) -> int:
    """Count numbers 1..n that are coprime to n (= totient)."""
    return euler_totient(n)


def sum_coprimes(n: int) -> int:
    """Sum of numbers 1..n coprime to n = n * phi(n) / 2."""
    if n == 1:
        return 1
    phi: int = euler_totient(n)
    return n * phi // 2


def test_module() -> int:
    passed: int = 0
    if euler_totient(10) == 4:
        passed = passed + 1
    if euler_totient(1) == 1:
        passed = passed + 1
    if totient_sum(6) == 12:
        passed = passed + 1
    sieve: list[int] = totient_sieve(10)
    if sieve[10] == 4:
        passed = passed + 1
    if sum_coprimes(12) == 24:
        passed = passed + 1
    return passed
