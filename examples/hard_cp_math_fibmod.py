# Generated by: depyler corpus generator
# Source: hard_cp_math_fibmod.py
#
# Fibonacci modular variants for transpiler stress testing.


def fibonacci_iterative(n: int) -> int:
    """Compute F(n) iteratively."""
    if n <= 0:
        return 0
    if n == 1:
        return 1
    a: int = 0
    b: int = 1
    i: int = 2
    while i <= n:
        c: int = a + b
        a = b
        b = c
        i = i + 1
    return b


def fibonacci_mod_iterative(n: int, mod: int) -> int:
    """Compute F(n) mod m iteratively."""
    if n <= 0:
        return 0
    if n == 1:
        return 1 % mod
    a: int = 0
    b: int = 1
    i: int = 2
    while i <= n:
        c: int = (a + b) % mod
        a = b
        b = c
        i = i + 1
    return b


def pisano_period(m: int) -> int:
    """Find Pisano period (period of Fibonacci mod m)."""
    if m == 1:
        return 1
    a: int = 0
    b: int = 1
    i: int = 0
    while i < m * m + 1:
        c: int = (a + b) % m
        a = b
        b = c
        if a == 0 and b == 1:
            return i + 1
        i = i + 1
    return 0 - 1


def fibonacci_last_digit(n: int) -> int:
    """Get last digit of F(n) (same as F(n) mod 10)."""
    return fibonacci_mod_iterative(n, 10)


def sum_fibonacci(n: int) -> int:
    """Sum of first n Fibonacci numbers: F(0)+F(1)+...+F(n) = F(n+2)-1."""
    return fibonacci_iterative(n + 2) - 1


def test_module() -> int:
    passed: int = 0
    if fibonacci_iterative(10) == 55:
        passed = passed + 1
    if fibonacci_mod_iterative(100, 1000000007) == 687995182:
        passed = passed + 1
    if pisano_period(10) == 60:
        passed = passed + 1
    if fibonacci_last_digit(331) == 9:
        passed = passed + 1
    if sum_fibonacci(6) == 20:
        passed = passed + 1
    return passed
