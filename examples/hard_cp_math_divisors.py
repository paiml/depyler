# Generated by: depyler corpus generator
# Source: hard_cp_math_divisors.py
#
# Number of divisors and divisor-related functions for transpiler stress testing.


def count_divisors(n: int) -> int:
    """Count number of divisors of n."""
    if n <= 0:
        return 0
    count: int = 0
    i: int = 1
    while i * i <= n:
        if n % i == 0:
            count = count + 1
            if i != n // i:
                count = count + 1
        i = i + 1
    return count


def sum_divisors(n: int) -> int:
    """Sum of all divisors of n."""
    if n <= 0:
        return 0
    total: int = 0
    i: int = 1
    while i * i <= n:
        if n % i == 0:
            total = total + i
            if i != n // i:
                total = total + n // i
        i = i + 1
    return total


def divisor_sieve(limit: int) -> list[int]:
    """Sieve to compute number of divisors for 1..limit."""
    d: list[int] = [0] * (limit + 1)
    i: int = 1
    while i <= limit:
        multiple: int = i
        while multiple <= limit:
            d[multiple] = d[multiple] + 1
            multiple = multiple + i
        i = i + 1
    return d


def is_perfect_number(n: int) -> int:
    """Check if n is a perfect number. Returns 1=yes, 0=no."""
    if n < 2:
        return 0
    s: int = sum_divisors(n) - n
    if s == n:
        return 1
    return 0


def largest_prime_factor(n: int) -> int:
    """Find the largest prime factor of n."""
    if n <= 1:
        return 0
    result: int = 0
    temp: int = n
    while temp % 2 == 0:
        result = 2
        temp = temp // 2
    f: int = 3
    while f * f <= temp:
        while temp % f == 0:
            result = f
            temp = temp // f
        f = f + 2
    if temp > 1:
        result = temp
    return result


def count_prime_factors(n: int) -> int:
    """Count distinct prime factors of n."""
    if n <= 1:
        return 0
    count: int = 0
    temp: int = n
    if temp % 2 == 0:
        count = count + 1
        while temp % 2 == 0:
            temp = temp // 2
    f: int = 3
    while f * f <= temp:
        if temp % f == 0:
            count = count + 1
            while temp % f == 0:
                temp = temp // f
        f = f + 2
    if temp > 1:
        count = count + 1
    return count


def test_module() -> int:
    passed: int = 0
    if count_divisors(12) == 6:
        passed = passed + 1
    if sum_divisors(12) == 28:
        passed = passed + 1
    sieve: list[int] = divisor_sieve(10)
    if sieve[6] == 4:
        passed = passed + 1
    if is_perfect_number(6) == 1:
        passed = passed + 1
    if largest_prime_factor(60) == 5:
        passed = passed + 1
    if count_prime_factors(60) == 3:
        passed = passed + 1
    return passed
