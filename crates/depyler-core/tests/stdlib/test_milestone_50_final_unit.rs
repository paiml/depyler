// Generated by: DEPYLER stdlib validation Phase 1
// Module: misc - Final 12 functions for 50% MILESTONE
// Status: RED phase - Tests written first, implementation pending

use depyler_core::transpile_python_to_rust;

// ========== STRING METHODS (5) ==========

// DEPYLER-STDLIB-50-001: Capitalize first character
#[test]
#[ignore = "DEPYLER-STDLIB-50: Not implemented yet - RED phase"]
fn test_str_capitalize() {
    let python = r#"
def capitalize_str(s: str) -> str:
    return s.capitalize()
"#;

    let result = transpile_python_to_rust(python).expect("Transpilation failed");
    assert!(result.contains("capitalize") || result.contains("to_uppercase"));
}

// DEPYLER-STDLIB-50-002: Swap case
#[test]
#[ignore = "DEPYLER-STDLIB-50: Not implemented yet - RED phase"]
fn test_str_swapcase() {
    let python = r#"
def swap_case(s: str) -> str:
    return s.swapcase()
"#;

    let result = transpile_python_to_rust(python).expect("Transpilation failed");
    assert!(result.contains("swapcase") || result.contains("map"));
}

// DEPYLER-STDLIB-50-003: Expand tabs
#[test]
#[ignore = "DEPYLER-STDLIB-50: Not implemented yet - RED phase"]
fn test_str_expandtabs() {
    let python = r#"
def expand_tabs(s: str) -> str:
    return s.expandtabs()
"#;

    let result = transpile_python_to_rust(python).expect("Transpilation failed");
    assert!(result.contains("expandtabs") || result.contains("replace"));
}

// DEPYLER-STDLIB-50-004: Split by lines
#[test]
#[ignore = "DEPYLER-STDLIB-50: Not implemented yet - RED phase"]
fn test_str_splitlines() {
    let python = r#"
def split_lines(s: str) -> list:
    return s.splitlines()
"#;

    let result = transpile_python_to_rust(python).expect("Transpilation failed");
    assert!(result.contains("lines") || result.contains("split"));
}

// DEPYLER-STDLIB-50-005: Partition by separator
#[test]
#[ignore = "DEPYLER-STDLIB-50: Not implemented yet - RED phase"]
fn test_str_partition() {
    let python = r#"
def partition_str(s: str, sep: str) -> tuple:
    return s.partition(sep)
"#;

    let result = transpile_python_to_rust(python).expect("Transpilation failed");
    assert!(result.contains("partition") || result.contains("split_once"));
}

// ========== COLLECTION METHODS (5) ==========

// DEPYLER-STDLIB-50-006: Clear dict
#[test]
#[ignore = "DEPYLER-STDLIB-50: Not implemented yet - RED phase"]
fn test_dict_clear() {
    let python = r#"
def clear_dict(d: dict) -> None:
    d.clear()
"#;

    let result = transpile_python_to_rust(python).expect("Transpilation failed");
    assert!(result.contains("clear"));
}

// DEPYLER-STDLIB-50-007: Extend list
#[test]
#[ignore = "DEPYLER-STDLIB-50: Not implemented yet - RED phase"]
fn test_list_extend() {
    let python = r#"
def extend_list(lst: list, items: list) -> None:
    lst.extend(items)
"#;

    let result = transpile_python_to_rust(python).expect("Transpilation failed");
    assert!(result.contains("extend") || result.contains("append"));
}

// DEPYLER-STDLIB-50-008: Find index
#[test]
#[ignore = "DEPYLER-STDLIB-50: Not implemented yet - RED phase"]
fn test_list_index() {
    let python = r#"
def find_index(lst: list, item: int) -> int:
    return lst.index(item)
"#;

    let result = transpile_python_to_rust(python).expect("Transpilation failed");
    assert!(result.contains("position") || result.contains("find"));
}

// DEPYLER-STDLIB-50-009: Discard from set
#[test]
#[ignore = "DEPYLER-STDLIB-50: Not implemented yet - RED phase"]
fn test_set_discard() {
    let python = r#"
def discard_item(s: set, item: int) -> None:
    s.discard(item)
"#;

    let result = transpile_python_to_rust(python).expect("Transpilation failed");
    assert!(result.contains("remove"));
}

// DEPYLER-STDLIB-50-010: Remove from set
#[test]
#[ignore = "DEPYLER-STDLIB-50: Not implemented yet - RED phase"]
fn test_set_remove() {
    let python = r#"
def remove_item(s: set, item: int) -> None:
    s.remove(item)
"#;

    let result = transpile_python_to_rust(python).expect("Transpilation failed");
    assert!(result.contains("remove"));
}

// ========== BUILTIN FUNCTIONS (2) ==========

// DEPYLER-STDLIB-50-011: Next from iterator
#[test]
#[ignore = "DEPYLER-STDLIB-50: Not implemented yet - RED phase"]
fn test_next_builtin() {
    let python = r#"
def get_next(items: list) -> int:
    it = iter(items)
    return next(it)
"#;

    let result = transpile_python_to_rust(python).expect("Transpilation failed");
    assert!(result.contains("next"));
}

// DEPYLER-STDLIB-50-012: Get attribute
#[test]
#[ignore = "DEPYLER-STDLIB-50: Not implemented yet - RED phase"]
fn test_getattr_builtin() {
    let python = r#"
def get_attr(obj, name: str) -> str:
    return getattr(obj, name)
"#;

    let result = transpile_python_to_rust(python).expect("Transpilation failed");
    assert!(result.contains("get") || result.contains("getattr"));
}

// Total: 12 NEW functions for 50% MILESTONE
// Coverage:
//   Strings: capitalize(), swapcase(), expandtabs(), splitlines(), partition()
//   Collections: dict.clear(), list.extend(), list.index(), set.discard(), set.remove()
//   Builtins: next(), getattr()
