// Generated by: DEPYLER stdlib validation Phase 1
// Module: str - Additional string methods
// Status: RED phase - Tests written first, implementation pending

use depyler_core::transpile_python_to_rust;

// DEPYLER-STDLIB-STR-ADDITIONAL-001: Count substring occurrences
#[test]
#[ignore = "DEPYLER-STDLIB-STR: Not implemented yet - RED phase"]
fn test_str_count() {
    let python = r#"
def count_occurrences(text: str, sub: str) -> int:
    return text.count(sub)
"#;

    let result = transpile_python_to_rust(python).expect("Transpilation failed");

    // Should count substring occurrences
    assert!(result.contains("matches") || result.contains("count"));
}

// DEPYLER-STDLIB-STR-ADDITIONAL-002: Find substring position
#[test]
#[ignore = "DEPYLER-STDLIB-STR: Not implemented yet - RED phase"]
fn test_str_find() {
    let python = r#"
def find_position(text: str, sub: str) -> int:
    return text.find(sub)
"#;

    let result = transpile_python_to_rust(python).expect("Transpilation failed");

    // Should find substring position (-1 if not found)
    assert!(result.contains("find") || result.contains("position"));
}

// DEPYLER-STDLIB-STR-ADDITIONAL-003: Index with error on not found
#[test]
#[ignore = "DEPYLER-STDLIB-STR: Not implemented yet - RED phase"]
fn test_str_index() {
    let python = r#"
def get_index(text: str, sub: str) -> int:
    return text.index(sub)
"#;

    let result = transpile_python_to_rust(python).expect("Transpilation failed");

    // Should find index or panic
    assert!(result.contains("find") || result.contains("expect") || result.contains("unwrap"));
}

// DEPYLER-STDLIB-STR-ADDITIONAL-004: Reverse find
#[test]
#[ignore = "DEPYLER-STDLIB-STR: Not implemented yet - RED phase"]
fn test_str_rfind() {
    let python = r#"
def find_last(text: str, sub: str) -> int:
    return text.rfind(sub)
"#;

    let result = transpile_python_to_rust(python).expect("Transpilation failed");

    // Should find last occurrence
    assert!(result.contains("rfind") || result.contains("last"));
}

// DEPYLER-STDLIB-STR-ADDITIONAL-005: Reverse index
#[test]
#[ignore = "DEPYLER-STDLIB-STR: Not implemented yet - RED phase"]
fn test_str_rindex() {
    let python = r#"
def get_last_index(text: str, sub: str) -> int:
    return text.rindex(sub)
"#;

    let result = transpile_python_to_rust(python).expect("Transpilation failed");

    // Should find last index or panic
    assert!(result.contains("rfind") || result.contains("expect"));
}

// Total: 5 tests for additional str methods
// Coverage: count(), find(), index(), rfind(), rindex()
